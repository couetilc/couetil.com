#!/usr/bin/env bash

if [ -t 1 ]; then
    INTERACTIVE="-it"
else
    INTERACTIVE=""
fi

docker build -t connor.couetil.com:latest $connor

docker run \
    --rm \
    --name "connor.couetil.com" \
    -e "LOG_LEVEL=$LOG_LEVEL" \
    -v "$connor/main.py":/app/main.py \
    -v "/app/.venv" \
    -p 8000:8000 \
    "$INTERACTIVE" \
    connor.couetil.com:latest \
    --dev
